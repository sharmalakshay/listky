{% extends "base.html" %}

{% block title %}Edit - {{ list.title }} - listky.top{% endblock %}

{% block content %}
<h1>Edit List</h1>

{% if error %}
<div style="background: #ffeaa7; color: #d63031; padding: 1rem; border-radius: 4px; margin: 1rem 0;">
    {{ error }}
</div>
{% endif %}

<form method="post" action="/{{ username }}/{{ list.slug }}/update">
    <div class="form-group">
        <label for="title">List Title</label>
        <input type="text" id="title" name="title" required 
               maxlength="200" 
               placeholder="My Awesome List"
               value="{{ title or list.title }}">
        <small>1-200 characters</small>
    </div>
    
    <div class="form-group">
        <label>URL Slug</label>
        <input type="text" value="{{ list.slug }}" disabled>
        <small>URL slug cannot be changed after creation</small>
    </div>
    
    <div class="form-group">
        <label for="content">List Content</label>
        <textarea id="content" name="content" required 
                  rows="10" 
                  maxlength="10000"
                  placeholder="• Item 1&#10;• Item 2&#10;• Check out https://example.com&#10;• Item 4">{{ content or list.content }}</textarea>
        <small>1-10,000 characters. URLs will automatically become clickable links.</small>
    </div>
    
    <div class="form-group">
        <label>
            <input type="checkbox" name="is_public" id="is_public" 
                   {% if (is_public is not none and is_public) or (is_public is none and list.is_public) %}checked{% endif %}>
            Make this list public
        </label>
        <small>Public lists can be viewed by anyone and may appear in trending. Private lists are only accessible to you.</small>
    </div>
    
    <button type="submit">Update List</button>
</form>

<div class="back">
    <a href="/{{ username }}/{{ list.slug }}">← View List</a> | 
    <a href="/{{ username }}">← My Profile</a>
</div>
{% endblock %}